---
layout: post
title: Keeping Track of Units in Your Software: Introduction to Unyt
category:
- Software
- Molecular simulation
excerpt: An introduction to Unyt
---

When I was in my first semester at Clemson, I took an intro engineering course that was
required for all engineering majors.  A large portion of this class focused on unit
conversions.  I remember the professor would always emphasize how important it was to keep
track of units in your calculations, citing a mistake in units that led to the cause of [Mars
Climate Orbiter crash](https://mars.nasa.gov/msp98/orbiter/).  While 100 million dollars
isn't on the line when dealing with units in molecular simulation, we certainly want to keep
track of them and avoid incorrect and unphysical systems.  

What makes units tricky in
molecular simulation is the shear amount of software packages available for initializing
systems, running simulations, and analysis, that all define different sets of base units. For
example, let's take a look at two popular simulation engines:
[GROMACS](http://www.gromacs.org) and [LAMMPS](https://lammps.sandia.gov).  GROMACS assumes
length and energy units in nanometers and kilojoules, while the `real` unit style in LAMMPS
assumes units of angstroms and kilocalories.  To make things more complicated, the analysis
packages also use different base units, as [MDTraj](http://mdtraj.org/1.9.3/) uses nanometers
as the base length unit and [MDAnalysis](https://www.mdanalysis.org/docs/index.html) uses
angstroms.  Hopefully this example gives you an idea of how cumbersome it can be to keep
track of units in a molecular simulation study.  This is where the
[Unyt](https://unyt.readthedocs.io/en/stable/) package can help.

### Unyt

`Unyt` is a python package that is developed for working with data that has physical units.
The main data structures in `Unyt` are the `unyt_array` and `unyt_quantity`.  Spefically, the
`unyt_array` is a subclass of the `ndarray` in Numpy that carries a unit, while the
`unyt_quantity` is for scalar values with units attached.  The documentation provides a very
good overview of the package, but I wanted to go over several functionalities I've found
useful.

### Basic Usage

Let's start off by initializing a `unyt_quantity` to a variable named `length`.

```
>>> import unyt as u
>>> length = 5 * u.nm
>>> print(length)
5 nm
```

Here, we create a `unyt_quantity` simply by multiplying the scalar value, 5, and the
nanometer `Unit` object.  When `length` is printed out, we see that it represents a value of
5 in units of nanometers.  Additionally, `Unyt` can keep track of units in mathematical
operations.  I will show this by calculating the volume of a cubic box that has dimensions of
5 nanometers:

```
>>> volume = length ** 3
>>> print(volume)
125 nm**3
```

Here, we took the `length` `unyt_quantity` to the power of three and set it to the variable
`volume`.  When `volume` is printed, we see that the correct units of cubic nanometers are
displayed.

(Show unit conversions
